/* Derivados locais (se seu tema já os define, pode remover daqui) */
:host{
  --text-muted: color-mix(in srgb, var(--text-main) 55%, transparent);
  --gray-050:   color-mix(in srgb, var(--text-main) 6%, transparent);
  --transition: .2s ease;

  /* Semânticas */
  --success-500:#16a34a;
  --danger-500: #dc2626;
  --warning-500:#f59e0b;
  --secondary-500:#6b7280;
}

%card-base {
  background-color: var(--card-bg);
  border-radius: var(--border-radius);
  padding: 1.5rem;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
  color: var(--text-main);
  border: none;
  transition: background-color 0.3s ease;
}
select {
  color: var(--text-main) !important;
}
.container-wrapper {
  .header {
    .header-content {
      h2 {
        margin: 0 0 0.5rem 0;
        color: var(--text-main);
        font-size: 2rem;
        font-weight: 600;
      }

      .subtitle {
        margin: 0;
        color: var(--text-muted);
        font-size: 1rem;
      }
    }
  }

  .header-actions {
    .btn-primary {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      background: var(--blue-500);
      color: #fff;
      border: none;
      border-radius: var(--border-radius);
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition);

      &:hover { background: var(--blue-900); }

      i { font-size: 1rem; }
    }
  }

  .filters-section {
    @extend %card-base;
    margin-bottom: 2rem;

    .filters-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;

      .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
          color: var(--text-main);

        label {
          font-weight: 500;
          color: var(--text-main);
          font-size: 0.9rem;
        }

        select {
          padding: 0.75rem;
          border: 1px solid var(--blue-500);
          border-radius: 8px;
          font-size: 0.9rem;
          background: var(--card-bg);
          color: var(--text-main);
          transition: all var(--transition);

          &:focus {
            outline: none;
            border-color: var(--blue-500);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--blue-500) 18%, transparent);
          }
        }
      }
    }
  }

  .table-container {
    @extend %card-base;
    padding: 0;
    overflow: hidden;

    .data-table {
      width: 100%;
      border-collapse: collapse;

      thead {
        background: var(--gray-050);

        th {
          padding: 1rem 1.5rem;
          text-align: left;
          font-weight: 600;
          color: var(--text-main);
          border-bottom: 1px solid var(--border-color);
          font-size: 0.9rem;
        }
      }

      tbody {
        tr {
          border-bottom: 1px solid var(--border-color);
          transition: background-color var(--transition);

          &:hover { background: var(--gray-050); }

          td {
            padding: 1rem 1.5rem;
            vertical-align: middle;

            .webhook-url {
              display: flex;
              align-items: center;
              gap: 0.5rem;

              .url {
                color: var(--text-main);
                font-family: monospace;
                font-size: 0.85rem;
                max-width: 300px;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
              }

              .btn-copy {
                background: transparent;
                border: none;
                color: var(--text-muted);
                cursor: pointer;
                padding: 0.25rem;
                border-radius: 4px;
                transition: all var(--transition);

                &:hover {
                  background: var(--gray-050);
                  color: var(--text-main);
                }
              }
            }

            .webhook-type {
              strong {
                display: block;
                color: var(--text-main);
                margin-bottom: 0.25rem;
              }
              small { color: var(--text-muted); font-size: 0.8rem; }
            }

            .status-badge {
              display: flex;
              align-items: center;
              gap: 0.5rem;
              padding: 0.25rem 0.75rem;
              border-radius: 20px;
              font-size: 0.8rem;
              font-weight: 500;
              text-transform: capitalize;
              width: fit-content;

              &.status-ativo {
                background: color-mix(in srgb, var(--success-500) 12%, transparent);
                color: var(--success-500);
              }
              &.status-inativo {
                background: color-mix(in srgb, var(--secondary-500) 12%, transparent);
                color: var(--secondary-500);
              }
              &.status-erro {
                background: color-mix(in srgb, var(--danger-500) 12%, transparent);
                color: var(--danger-500);
              }
            }

            .text-muted { color: var(--text-muted); font-style: italic; }

            .actions {
              display: flex; gap: 0.5rem;

              .btn-icon {
                width: 32px; height: 32px;
                border: none; background: transparent;
                border-radius: 6px;
                display: flex; align-items: center; justify-content: center;
                cursor: pointer; transition: all var(--transition);
                color: var(--text-muted);

                &:hover:not(:disabled) {
                  background: var(--gray-050);
                  color: var(--text-main);
                }

                &:disabled { opacity: .5; cursor: not-allowed; }

                &.danger:hover {
                  background: color-mix(in srgb, var(--danger-500) 12%, transparent);
                  color: var(--danger-500);
                }
              }
            }
          }
        }
      }
    }
  }

  .loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4rem 2rem;

    .loading-spinner {
      width: 40px; height: 40px;
      border: 3px solid var(--border-color);
      border-top: 3px solid var(--blue-500);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    p { color: var(--text-muted); margin: 0; }
  }

  .empty-state {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 4rem 2rem; text-align: center;

    i { font-size: 4rem; color: var(--text-muted); margin-bottom: 1rem; }
    h3 { margin: 0 0 .5rem 0; color: var(--text-main); }
    p { margin: 0 0 2rem 0; color: var(--text-muted); }

    .btn-primary {
      display: flex; align-items: center; gap: .5rem;
      padding: .75rem 1.5rem;
      background: var(--blue-500); color: #fff; border: none;
      border-radius: var(--border-radius);
      font-weight: 500; cursor: pointer;
      transition: all var(--transition);

      &:hover { background: var(--blue-900); }
    }
  }

  .pagination {
    display: flex; justify-content: right; align-items: center; gap: 1rem; margin-top: 2rem;

    .btn-pagination {
      padding: .5rem 1rem;
      border: 1px solid var(--border-color);
      background: var(--card-bg);
      color: var(--text-main);
      border-radius: 6px;
      cursor: pointer;
      transition: all var(--transition);

      &:hover:not(:disabled) { background: var(--gray-050); }
      &:disabled { opacity: .5; cursor: not-allowed; }
    }

    .page-numbers {
      display: flex; gap: .25rem;

      .btn-page {
        width: 40px; height: 40px;
        border: 1px solid var(--border-color);
        background: var(--card-bg);
        color: var(--text-main);
        border-radius: 6px; cursor: pointer;
        transition: all var(--transition);

        &:hover { background: var(--gray-050); }

        &.active {
          background: var(--blue-500); color: #fff; border-color: var(--blue-500);
        }
      }
    }
  }
}

/* ============== Modal Styles ============== */
.create-webhook-content {
  .description {
    background: var(--gray-050);
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    color: var(--text-muted);
    font-size: 0.9rem; line-height: 1.5;
  }

  .create-form {
    .form-group {
      margin-bottom: 1.5rem;

      label {
        display: block; margin-bottom: .5rem;
        font-weight: 500; color: var(--text-main);
      }

      input, select {
        width: 100%; padding: .75rem;
        border: 1px solid var(--border-color);
        border-radius: 8px; font-size: .9rem;
        background: var(--card-bg); color: var(--text-main);
        transition: all var(--transition);

        &:focus {
          outline: none;
          border-color: var(--blue-500);
          box-shadow: 0 0 0 3px color-mix(in srgb, var(--blue-500) 18%, transparent);
        }
      }

      .help-text {
        display: block; margin-top: .5rem;
        font-size: .8rem; color: var(--text-muted);
      }
    }
  }
}

.details-content {
  .details-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;

    .detail-section {
      h4 { margin: 0 0 1rem 0; color: var(--text-main); font-size: 1.1rem; }

      .detail-row {
        display: flex; justify-content: space-between; align-items: flex-start;
        padding: .75rem 0; border-bottom: 1px solid var(--border-color);

        &:last-child { border-bottom: none; }

        .label { font-weight: 500; color: var(--text-muted); min-width: 100px; }
        .value { color: var(--text-main); text-align: right; flex: 1; }

        .events-list {
          display: flex; flex-direction: column; gap: .5rem; flex: 1;

          .event-tag {
            background: var(--gray-050);
            padding: .25rem .5rem;
            border-radius: 4px;
            font-size: .8rem; font-family: monospace;
            color: var(--text-main);
          }
        }
      }
    }
  }

  .webhook-actions {
    display: flex; gap: 1rem; flex-wrap: wrap;

    button {
      display: flex; align-items: center; gap: .5rem;
      padding: .75rem 1rem; border-radius: 6px;
      font-weight: 500; cursor: pointer; transition: all var(--transition);

      &.btn-secondary {
        background: var(--card-bg);
        color: var(--text-main);
        border: 1px solid var(--border-color);

        &:hover { background: var(--gray-050); }
      }

      &.btn-danger {
        background: color-mix(in srgb, var(--danger-500) 12%, transparent);
        color: var(--danger-500);
        border: 1px solid color-mix(in srgb, var(--danger-500) 20%, transparent);

        &:hover { background: color-mix(in srgb, var(--danger-500) 20%, transparent); }
      }
    }
  }
}

.events-content {
  .events-header {
    margin-bottom: 2rem;

    h4 { margin: 0 0 .5rem 0; color: var(--text-main); }
    p  { margin: 0; color: var(--text-muted); font-size: .9rem; }
  }

  .events-table {
    table {
      width: 100%; border-collapse: collapse;

      thead {
        background: var(--gray-050);

        th {
          padding: .75rem 1rem; text-align: left; font-weight: 600;
          color: var(--text-main);
          border-bottom: 1px solid var(--border-color);
          font-size: .9rem;
        }
      }

      tbody {
        tr {
          border-bottom: 1px solid var(--border-color);

          &:hover { background: var(--gray-050); }

          td {
            padding: .75rem 1rem; vertical-align: middle;

            .event-info {
              strong { display: block; color: var(--text-main); margin-bottom: .25rem; }
              small  { color: var(--text-muted); font-size: .8rem; font-family: monospace; }
            }

            .response-code {
              padding: .25rem .5rem;
              border-radius: 4px;
              font-family: monospace;
              font-size: .8rem; font-weight: 500;

              &.success{
                background: color-mix(in srgb, var(--success-500) 12%, transparent);
                color: var(--success-500);
              }
              &.error{
                background: color-mix(in srgb, var(--danger-500) 12%, transparent);
                color: var(--danger-500);
              }
            }

            .btn-icon {
              width: 28px; height: 28px;
              border: none; background: transparent; border-radius: 4px;
              display: flex; align-items: center; justify-content: center;
              cursor: pointer; transition: all var(--transition);
              color: var(--text-muted); margin-right: .5rem;

              &:hover { background: var(--gray-050); color: var(--text-main); }
            }
          }
        }
      }
    }
  }

  .empty-events {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 3rem 2rem; text-align: center;

    i { font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem; }
    p { margin: 0; color: var(--text-muted); }
  }
}

@keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }

@media (max-width: 768px) {
  .container-wrapper {
    .header {
      flex-direction: column; gap: 1rem;

      .header-actions {
        width: 100%;
        .btn-primary { width: 100%; justify-content: center; }
      }
    }

    .filters-section .filters-row { grid-template-columns: 1fr; }

    .table-container {
      overflow-x: auto;
      .data-table { min-width: 800px; }
    }
  }

  .details-content .details-grid { grid-template-columns: 1fr; }

  .webhook-actions {
    flex-direction: column;
    button { width: 100%; justify-content: center; }
  }
}
